define("pc-bundle",[],function(){var k=function(l,v){var p,m,u,o=d3.scale.category20().range().concat(d3.scale.category20b().range()).concat(d3.scale.category20c().range()),t=d3.dispatch("initialized","startToInit");var s=d3.dispatch("initialized");var r=$.extend(true,{},l.props(null));var n;function q(x){t.startToInit();n=x;var w=v.effectManager;x.each(function(){var R;var V=[];var X=p.getAnalysisAxisDataByIdx(0);var ac=X.values[0].col.val;var D=p.getMeasureValuesGroupDataByIdx(0);for(var W=0;W<D.values.length;W++){V.push(D.values[W].col)}var C=sap.viz.api.env.Format,F=sap.common.globalization.NumericFormatManager.DEFAULT_FORMAT_NUMBER;var H=function(ae){var ad="";if(r.tooltip.formatString&&r.tooltip.formatString.length>0){ad=r.tooltip.formatString[0]}else{ad=F}return C.format(ae,ad)};var J=function(){var ad=[];var ag=-1;for(var ai=0;ai<D.values.length;ai++){var ak=D.values[ai];for(var af=0;af<ak.rows[0].length;af++){var ah=ak.rows[0];for(var ae=0;ae<ah[af].length;ae++){var aj;if(ah[af][ae].val!=null){ag++;if(ad[ag]===undefined){aj={};ad[ag]=aj}else{aj=ad[ag]}aj[ak.col]=ah[af][ae].val;aj[ac]=X.values[0].rows[af].val;aj.ctx=ah[af][ae].ctx}}}ag=-1}return ad};var M=J();var Q=80,N=40,G=20,E=20,L=m-Q-N,Z=u-G-E;d3.select(this).selectAll("*").remove();var I=d3.scale.ordinal().domain(V).rangePoints([0,L]);var y={};var K=d3.svg.line();var z;var S=d3.select(this).append("g").attr("width",m).attr("height",u).attr("transform","translate("+Q+","+G+")");V.forEach(function(ad){y[ad]=d3.scale.linear().domain(d3.extent(M,function(ae){return +ae[ad]})).range([u-50,0]);y[ad].brush=d3.svg.brush().y(y[ad]).on("brush",O)});z=S.append("g").attr("class","foreground").style("fill","none").selectAll("path").data(M).enter().append("path").classed("v-datapoint",true).attr("d",function(ad){return ab(ad,V,I,y)}).style("stroke",function(ad){if(ac!==undefined){return o[B(ad[ac])%o.length]}else{return o[0]}});if(r.tooltip.visible){z.on("mouseover",function(ad){A(T(this,ad,ac,V))}).on("mouseout",function(){S.select("#tooltip").remove()})}var A=function(ai){var an=parseInt(ai.x);var al=parseInt(ai.y);var am=ai.mesToolTipText.length;var ap=am*27;var ah=al+ap;var ad=al;if(ah>u){ad=ah=al-ap}var ak=ai.dimToolTipText.length*8+10;var aj=0,ag;for(var af=0;af<ai.mesToolTipText.length;af++){if(ag<ai.mesToolTipText[af].length){aj=ai.mesToolTipText[af].length}}ag=aj*8+10;var ae=ak>ag?ak:ag;var ao=S.append("g").attr("id","tooltip").attr("overflow","visible");ao.append("path").attr("id","tipPath").style("fill","#F4F4F4").attr("d","M"+(an+5)+" "+(al)+"H"+(an+ae)+"V"+(ah)+"H"+(an+10)+"V"+(al+5)+"Z");ao.append("text").attr("id","#tipDimension").attr("x",an+15).attr("y",ad+20).attr("font-size","13"+"px").attr("font-family","Arial").text(ai.dimToolTipText);for(af=0;af<am;af++){ao.append("text").attr("id","tipMeasure"+af).text(ai.mesToolTipText[af]).attr("x",an+20).attr("y",ad+37).attr("font-size","13"+"px").attr("font-family","Arial");d3.select("#tipMeasure"+af).attr("x",an+20).attr("y",ad+37+(af*17))}};var T=function(ah,ak,ae,aj){var ai=ae+" : "+ak[ae];var ad=[];for(var af=0;af<aj.length;af++){ad.push(aj[af]+" : "+H(ak[aj[af]]))}var ag={"x":d3.mouse(ah)[0],"y":d3.mouse(ah)[1],"dimToolTipText":ai,"mesToolTipText":ad};return ag};function Y(ad){if(d3.event.x<=m-20){I.range()[R]=d3.event.x;V.sort(function(af,ae){return I(af)-I(ae)});aa.attr("transform",function(ae){return"translate("+I(ae)+")"});z.attr("d",function(ae){return ab(ae,V,I,y)});I.domain(V)}}function U(ad){aa.attr("transform",function(ae){return"translate("+I(ae)+")"});z.attr("d",function(ae){return ab(ae,V,I,y)})}function P(ae){var ad="";if(ae.color){ad+="fill:"+ae.color+";"}if(ae.fontFamily){ad+="font-family:"+ae.fontFamily+";"}if(ae.fontSize){ad+="font-size:"+ae.fontSize+";"}if(ae.fontWeight){ad+="font-weight:"+ae.fontWeight+";"}if(ae.fontStyle){ad+="font-style:"+ae.fontStyle+";"}return ad}var aa=S.selectAll("axis").data(V).enter().append("svg:g").attr("transform",function(ad){return"translate("+I(ad)+")"}).call(d3.behavior.drag().origin(function(ad){return{x:I(ad)}}).on("dragstart",function(ad){R=V.indexOf(ad)}).on("drag",Y).on("dragend",U)).attr("class","axistext");if(r.drawingEffect){aa.append("svg:g").attr("class","axis").attr("style",P(r.measureAxis.label.style)).each(function(ae){var ad=d3.select(this).call(d3.svg.axis().scale(y[ae]).orient("left").tickFormat(function(af){return H(af)}));if(r.measureAxis.label.visible){ad.append("text").attr("text-anchor","middle").attr("y",-9).text(String).attr("class","axistext")}else{d3.select(this).selectAll("text").attr("style","display:none")}d3.select(this).select("path").attr("style","cursor:move;fill:none;stroke:"+r.measureAxis.color)}).append("svg:g").each(function(ad){d3.select(this).call(y[ad].brush).selectAll("rect").style("fill","gray").style("opacity",0.5).attr("x",-8).attr("rx",10).attr("width",16)})}else{aa.append("svg:g").attr("class","axis").attr("style",P(r.measureAxis.label.style)).each(function(ae){var ad=d3.select(this).call(d3.svg.axis().scale(y[ae]).orient("left").tickFormat(function(af){return H(af)}));if(r.measureAxis.label.visible){ad.append("text").attr("text-anchor","middle").attr("y",-9).text(String).attr("class","axistext")}else{d3.select(this).selectAll("text").attr("style","display:none")}d3.select(this).select("path").attr("style","cursor:move;fill:none;stroke:"+r.measureAxis.color)})}function ab(ah,ag,af,ad){var ae=[];ag.forEach(function(ai){var aj=[];aj[0]=af(ai);aj[1]=ad[ai](ah[ai]);ae.push(aj)});ag=null;return K(ae)}function O(){var ad=V.filter(function(af){return !y[af].brush.empty()});var ae=ad.map(function(af){return y[af].brush.extent()});z.classed("dehighlight",function(af){return !ad.every(function(ah,ag){return ae[ag][0]<=af[ah]&&af[ah]<=ae[ag][1]})})}function B(ae){var af=X.values[0].rows;for(var ad=0;ad<af.length;ad++){if(af[ad].val===ae){return ad}}return 0}t.initialized({name:"initialized"})});b(x,m,u,undefined,true);s.initialized();return q}q.parent=function(){return n};q.width=function(w){if(!arguments.length){return m}m=w;return q};q.height=function(w){if(!arguments.length){return u}u=w;return q};q.data=function(w){if(!arguments.length){return p}p=w;return q};q.dispatch=function(w){if(!arguments.length){return t}t=w;return q};q.parent=function(){return n};q.highlight=function(w,x){if(!w.length){w=[w]}if(!x){d3.selectAll(w).attr("opacity",1)}};q.unhighlight=function(w){if(!w.length){w=[w]}};q.clear=function(w){if(w===undefined||w===false){n.selectAll(".v-datapoint").attr("opacity",1)}else{n.selectAll(".v-datapoint").attr("opacity",0.4)}};q.getPreferredSize=function(){};q.properties=function(w){if(!arguments.length){return r}r=$.extend(r,w);if(w&&w.colorPalette){o=w.colorPalette}return q};q.colorPalette=function(w){if(!arguments.length){return o}o=w;return this};return q};var b=function(p,o,l,n,r){var s="v-bound";var q;if(o<0||l<0){return null}if(p.select("."+s).node()==null){q=p.insert("rect",":first-child").attr("class",s).attr("width",o).attr("height",l);if(r){q.attr("fill","transparent")}else{q.attr("visibility","hidden")}}else{q=p.select("."+s).attr("width",o).attr("height",l)}if(n){for(var m in n){if(n.hasOwnProperty(m)){q.attr(m,n[m])}}}return q};var f={"id":"sap.viz.modules.parco.valueaxis1","name":"Primary Values","type":"Measure","min":2,"max":Number.POSITIVE_INFINITY,"mgIndex":1};var i={"id":"sap.viz.modules.parco.series.color","name":"Category","type":"Dimension","min":1,"max":1,"maxStackedDims":1,"acceptMND":false,"aaIndex":1};var j=d3.scale.category20().range().concat(d3.scale.category20b().range()).concat(d3.scale.category20c().range());var a={"id":"sap.viz.modules.parco","type":"CHART","name":"parallel coordinates","datastructure":"DATA STRUCTURE DOC","properties":{"tooltip":{"name":"tooltip","description":"Settings for tooltip","supportedValueType":"Object","supportedValues":{"visible":{"name":"visible","supportedValueType":"Boolean","defaultValue":true,"description":"Set the visibility of tooltip"},"formatString":{"name":"formatString","supportedValueType":"StringArray","defaultValue":null,"description":"Set format string of tooltip"}}},"colorPalette":{"name":"colorPalette","supportedValueType":"StringArray","description":"set color palette for the chart","defaultValue":j},"measureAxis":{"name":"measureAxis","description":"Settings for the measure axis","supportedValueType":"Object","supportedValues":{"color":{"name":"color","supportedValueType":"String","defaultValue":"#6c6c6c","description":"Set the color of axis"},"label":{"name":"label","description":"Settings for the label of measure axis","supportedValueType":"Object","supportedValues":{"visible":{"name":"visible","supportedValueType":"Boolean","defaultValue":true,"description":"Set the visibility of the labels on this axis"},"style":{"name":"style","description":"Settings for the label style of measure axis","supportedValueType":"Object","supportedValues":{"color":{"name":"color","supportedValueType":"String","defaultValue":"#333333","description":"Set the color of label"},"fontFamily":{"name":"fontFamily","supportedValueType":"String","defaultValue":"'Open Sans', Arial, Helvetica, sans-serif","description":"Set the font family of label"},"fontSize":{"name":"fontSize","supportedValueType":"String","defaultValue":"12px","description":"Set the font size of label"},"fontWeight":{"name":"fontWeight","supportedValueType":"String","defaultValue":"normal","description":"Set the font wieight of label"},"fontStyle":{"name":"fontStyle","supportedValueType":"String","defaultValue":"normal","description":"Set the font style of label"}}}}}}}},"events":{"initialized":"initialized",},"feeds":[f,i],"css":null,"configure":null,"fn":k};var c=function(n,l){var o=function(){};var m=$.extend(true,{},n.props(null));o.data=function(w){var t=w.getAnalysisAxisDataByIdx(0);var z=t.values[0].col.val;var r=t.values[0].rows;var y=[];var s=[];var A=w.getMeasureValuesGroupDataByIdx(0).values;var x,v;for(x=0;x<A.length;x++){for(v=0;v<A[x].rows[0].length;v++){if(A[x].rows[0][v].val==null||A[x].rows[0][v].val===""){for(var u=0;u<A.length;u++){A[u].rows[0].splice(v,1)}r.splice(v,1)}}}var p=[];for(x=0;x<A.length;x++){p[x]={}}for(x=0;x<r.length;x++){if(s.length>0){if(s.indexOf(r[x].val)==-1){s.push(r[x].val);y.push(r[x])}}else{s.push(r[x].val);y.push(r[x])}for(v=0;v<A.length;v++){if(!p[v].hasOwnProperty(r[x].val)){p[v][r[x].val]=[]}p[v][r[x].val].push(A[v].rows[0][x])}}w.getAnalysisAxisDataByIdx(0).values[0].rows=y;for(x=0;x<A.length;x++){var q=[];for(v=0;v<s.length;v++){q.push(p[x][s[v]])}w.getMeasureValuesGroupDataByIdx(0).values[x].rows[0]=q}};o.properties=function(p){if(!arguments.length){return m}m=$.extend(m,p);return o};return o};var h={"id":"sap.viz.modules.parcoDataTranform","type":"CONTROLLER","name":"parallel coordinates data transfrom","renderto":"NONE","datastructure":"","properties":{},"events":{"initialized":"initialized",},"css":null,"configure":null,"fn":c};var g={id:"viz/ext/pa/pc",name:"Parallel Coordinates Chart",legacyDataAdapter:true,modules:{dataTransform:{id:"sap.viz.modules.parcoDataTranform",configure:{propertyCategory:"dataTransform"}},root:{id:"sap.viz.modules.rootContainer",configure:{propertyCategory:"general"},modules:{interaction:{id:"sap.viz.modules.controller.interaction",configure:{clientID:"main",propertyCategory:"interaction",properties:{holdSelection:true}}},layout:{id:"sap.viz.modules.layout.dock"},title:{id:"sap.viz.modules.title",configure:{propertyCategory:"title",properties:{layout:{position:"top",priority:0}}}},legends:{id:"sap.viz.modules.legend",configure:{propertyCategory:"legendContainer",properties:{layout:{position:"right",priority:1}}},modules:{legend:{id:"sap.viz.modules.legend.common",data:{aa:[1]},configure:{propertyCategory:"legend",properties:{layout:{order:0}}}},layout:{id:"sap.viz.modules.layout.stack"}}},main:{id:"sap.viz.modules.xycontainer",modules:{plot:{id:"sap.viz.modules.parco",configure:{propertyCategory:"plotArea",properties:{layout:{position:"top",priority:1},tooltip:{visible:true,formatString:null},measureAxis:{color:"#6c6c6c",label:{visible:true,style:{color:"#333333",fontFamily:"'Open Sans', Arial, Helvetica, sans-serif",fontSize:"12px",fontWeight:"normal",fontStyle:"normal"}}},colorPalette:j}}},background:{id:"sap.viz.modules.background",configure:{propertyCategory:"background",properties:{direction:"vertical"}}}},configure:{propertyCategory:"xyContainer",properties:{layout:{position:"center",priority:5}}}}}}},dependencies:{attributes:[{targetModule:"root.legends.legend",target:"colorPalette",sourceModule:"root.main.plot",source:"colorPalette"}],events:[{targetModule:"root.interaction",listener:"initialize",sourceModule:"root.main.plot",type:"initialized.interaction"}]}};var d={viz:[g],module:[a,h],feeds:[]};var e=sap.bi.framework.declareBundle({"id":"viz.ext.pa.pc","version":"1.0.0","components":[{"id":"viz/ext/pa/pc","provide":"sap.viz.impls","instance":d,"customProperties":{"name":"localize!COMPONENT_NAME","description":"A very powerful tool for understanding multi-dimensional numerical datasets","icon":{"path":""},"category":["predictive","comparision"],"resources":[{"key":"sap.viz.api.env.Template.loadPaths","path":"./resources/templates"}],"requires":[{"id":"sap.viz.common.core","version":"4.0.12"}]}}],"localizedResources":{"en":{"COMPONENT_NAME":"Parallel Coordinate Chart"},"fr":{"COMPONENT_NAME":"Parallel Coordinate Chart"},"zh_CN":{"COMPONENT_NAME":"Parallel Coordinate Chart"},"de":{"COMPONENT_NAME":"Parallel Coordinate Chart"},"ja":{"COMPONENT_NAME":"Parallel Coordinate Chart"},"es":{"COMPONENT_NAME":"Parallel Coordinate Chart"},"ru":{"COMPONENT_NAME":"Parallel Coordinate Chart"},"pt":{"COMPONENT_NAME":"Parallel Coordinate Chart"},"ko":{"COMPONENT_NAME":"Parallel Coordinate Chart"}}});if(sap.bi.framework.getService("sap.viz.aio","sap.viz.extapi")){return sap.bi.framework.getService("sap.viz.aio","sap.viz.extapi").core.registerBundle(e)}else{return e}});